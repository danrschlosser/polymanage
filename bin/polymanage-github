#! /usr/bin/env node

'use strict'

var program = require('commander');
var myPackage = require('../package.json');
var config = require('../config.json');

var GithubManager = require('../src/githubManager');

program
  .version(myPackage.version)
  .command('issues <repo> [otherRepos...]')
  .option('-l, --list', 'List all issues across repos')
  .action(function (repoRegex, otherRepos) {
    console.log(repoRegex, otherRepos);
  })

program
  .command('list <repoRegex> [otherRepos...]')
  .option('-p, --properties <properties>', 'List of properties to emit', function(val) { return val.split(' ')})
  .option('-v, --verbose', 'Verbose')
  .action(function (repoRegex, otherRepos) {
    GithubManager.auth({
      type: "oauth",
      token: config.github.token
    });

    var manager = GithubManager.getGithubManager(repoRegex, otherRepos);
    manager.list(this.properties, this.verbose);
  });

program
  .command('labels [command]', 'act on github labels for one or more repos');



program.parse(process.argv);
